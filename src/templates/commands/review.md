---
description: 시행착오 기록 및 수정 주의 반영
---

# /review - 시행착오 기록 & 수정 주의 반영

구현 중 발생한 시행착오를 기록하고, 수정 주의 사항을 명세에 반영합니다.

## 호출 시점

- 구현 완료 후
- **시행착오 발생 시** (중요!)
- 하루 작업 종료 시

## 사용법

```
/review
/review {시행착오 설명}
```

예시:
```
/review                                    # 대화형으로 진행
/review localStorage 토큰 저장 실패        # 시행착오 직접 명시
```

## 핵심 흐름

```
시행착오 발생
    ↓
/review 호출
    ↓
clarifications.md에 기록
    ↓
CLAUDE.md "수정 주의"에 요약 반영
    ↓
다음 세션에서 AI가 자동으로 인지
```

## 프로세스

### 1. 최근 변경 분석

- `git diff`로 변경된 파일 확인
- 또는 사용자에게 직접 질문

### 2. 시행착오 수집

다음을 질문:

**Q1: "문제가 있었나요?"**
- 예: "localStorage에 토큰 저장했더니 XSS 취약점 발생"

**Q2: "어떻게 해결했나요?"**
- 예: "httpOnly 쿠키로 변경"

**Q3: "다시 시도하면 안 되는 것은?"**
- 예: "localStorage에 민감 정보 저장"

**Q4: "관련 파일은 어디인가요?"**
- 예: "src/auth/token.ts"

### 3. clarifications.md 업데이트

`specs/{current}/clarifications.md`:

```markdown
## 시행착오
| 날짜 | 시도 | 결과 | 교훈 |
|------|------|------|------|
| 2026-01-19 | localStorage 토큰 저장 | XSS 취약 | httpOnly 쿠키 사용 |

## 수정 주의 파일
| 파일 | 이유 | 관련 시행착오 |
|------|------|---------------|
| src/auth/token.ts | 보안 검증 완료 | localStorage 실패 |
```

### 4. CLAUDE.md 업데이트

"수정 주의 사항" 섹션:

```markdown
## 수정 주의 사항

> 아래 파일들은 시행착오를 거쳐 완성되었습니다. 수정 전 관련 명세를 확인하세요.

| 파일 | 이유 | 관련 명세 |
|------|------|-----------|
| src/auth/token.ts | XSS 방지를 위해 httpOnly 사용 | specs/001-login/clarifications.md |
```

### 5. 현재 작업 상태 업데이트

```markdown
## 현재 작업

- **명세**: 001-login
- **태스크**: T005 - 토큰 저장 로직
- **TDD 상태**: green (방금 해결)
```

## 완료/진행 상황 기록

시행착오 없이 작업 완료 시:

```
/review

> "시행착오 없이 순조롭게 진행됐나요?"
> - 예 → 진행 상황만 기록
> - 아니오 → 시행착오 수집 진행
```

## 체크리스트 출력

```
📋 리뷰 체크리스트

- [ ] 시행착오가 clarifications.md에 기록됨
- [ ] 수정 주의 파일이 CLAUDE.md에 반영됨
- [ ] 변경사항 커밋됨
- [ ] 테스트 통과

계속 작업하시겠습니까? `/cycle red` 또는 `/status`
```

## 수정 주의 사항의 의미

**중요**: 수정 주의 사항은 "절대 수정 금지"가 아닙니다.

```
수정 주의 = "이 파일은 시행착오를 거쳐 현재 상태가 됨"
          + "수정 시 관련 명세의 컨텍스트를 먼저 확인"
          + "같은 실수를 반복하지 않도록 주의"
```

## 완료 조건

- [ ] 시행착오 수집 완료
- [ ] clarifications.md 업데이트
- [ ] CLAUDE.md "수정 주의" 반영
- [ ] 현재 작업 상태 업데이트
- [ ] 다음 액션 안내
